"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8633],{38633:function(e,n,c){c.r(n);var t=c(47568),a=c(29815),s=c(34051),i=c.n(s),l=c(85893),r=c(67294),o=c(15861),u=c(83321),h=c(11163),d=c(83170),m=c(74730),v=c(88835),f=c(22297),g=c(17886),p=c(86591),x=c(32385),j=c(20541),_=c(78598),N=c(87406);n.default=function(e){var n,c,s,w,S,k,T,C=(0,h.useRouter)().query.search_query,y=e.styles,Z=void 0===y?{}:y,b=e.theme,E=void 0===b?"":b,I=e.configData,L=e.isMobile,A=e.isSearchBar,O=e.handleSearchBar,P=e.mobileshowsearchBar,G=(0,_.Is)(E),R=Array.from(new Set((0,p.cF)(d.Tm8))),U=(0,r.useState)(C||""),D=U[0],H=U[1],B=(0,r.useState)(!1),q=B[0],z=B[1],F=(0,r.useState)([]),Y=F[0],M=F[1],V=(0,r.useState)(R),$=V[0],K=V[1],J=(0,x.Z)(D,500),W=(0,r.useState)([]),X=W[0],Q=W[1],ee=(0,r.useState)([]),ne=ee[0],ce=ee[1],te=(0,r.useRef)(),ae=null===G||void 0===G||null===(n=G.page)||void 0===n||null===(c=n.HomePage)||void 0===c||null===(s=c.component)||void 0===s?void 0:s.HeaderSearch,se=(0,p.$1)(d.S_M,""),ie={searchword:D,filter:d.RsG,rows:10,regionId:"KA",capillaryUserId:se};(0,r.useEffect)((function(){if(E!==d.WDV){var n,c,t=(0,p.cF)("".concat(d.dgU).concat(e.theme));if(t)Q(null!==(n=t.occasion)&&void 0!==n?n:[]),ce(null!==(c=t.trending)&&void 0!==c?c:[]);else(0,f.Yu)(g.L,e.configData,{},e.deviceData).then((function(e){if(e&&e.success){var n,c,t=e.results,a=void 0===t?{}:t;(0,p.po)("".concat(d.dgU).concat(E),a,1),Q(null!==(n=a.occasion)&&void 0!==n?n:[]),ce(null!==(c=a.trending)&&void 0!==c?c:[])}}))}}),[]);var le=function(){var n=(0,t.Z)(i().mark((function n(){var c,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,f.qC)(g.bP,I,ie);case 2:c=n.sent,M(c),c.success&&window.clevertap&&((t={})["SearchTerm ".concat(e.theme)]=D,t["SearchResults ".concat(e.theme)]=c.results.map((function(e){return e.terms})).join(", "),t["Source ".concat(e.theme)]=(0,j.jz)(),window.clevertap.event.push("Search",t));case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),re=function(n){if(window.clevertap){var c={};c["ResultName ".concat(e.theme)]=n||"",c["SearchTerm ".concat(e.theme)]=D||"",c["Source ".concat(e.theme)]=(0,j.jz)(),window.clevertap.event.push("Search Result Clicked",c)}};(0,r.useEffect)((function(){J.length>2&&le(),0===J.length&&M([])}),[J]);var oe=function(n,c,t,s){if(e.handleAdobeEvent("search click",null,null,t||n),n){var i=[n].concat((0,a.Z)($));K(i),(0,p.po)(d.Tm8,i,24);var l=c||"".concat(d.XY2).concat(decodeURIComponent(n));s&&(l+="&stype=".concat(s)),window.location.href=l,H("")}else c&&(window.location.href="".concat(c).concat(s?"&stype=".concat(s):""))};(0,r.useEffect)((function(){var e=function(e){q&&te.current&&!te.current.contains(e.target)&&z(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[q]);var ue=function(){H(""),z(!1),M([])},he=function(e,n){if(e===d.Tm8){re(n);var c="/c/search/?search_query=".concat(decodeURIComponent(n));oe(D,c,n,2)}else{n.id;var t=n.terms,a=(n.type,encodeURIComponent(t.toLowerCase())),s="/c/search/?search_query=".concat(a);re(t),oe(t,s,null,2)}},de=function(e){re(e.name),oe(e.name.toLowerCase(),null,null,2)},me=null!==I&&void 0!==I?I:getSession(GLOBAL_CONFIG);me=(0,p.YN)(me);var ve=L?v.oYZ.VH_PATH:v.oYZ["".concat(E,"_PATH")],fe="".concat((null===me||void 0===me?void 0:me.ImageBaseUrl)&&me.ImageBaseUrl[E],"/img/app/brands/superapp/Icons/headersprite_2.png");return L&&A||!L?(0,l.jsxs)("div",{className:"".concat(Z.headerSearch," ").concat(D.length>2?Z.clearActive:""," ").concat(Z[E]),ref:te,children:[(0,l.jsx)("i",{onClick:function(){var n;oe(D,null,null,(null===Y||void 0===Y||null===(n=Y.results)||void 0===n?void 0:n.length)?1:3),""===D&&(z(!0),e.handleAdobeEvent("search initiate",q,!!e.isMobile))},className:"".concat(Z.sprite," ").concat(Z["".concat(null===(w=null===ve||void 0===ve?void 0:ve.replace("/Icons/",""))||void 0===w?void 0:w.replace(".svg",""))]),style:{display:"block",height:ae.icon_search_height,width:ae.icon_search_width,backgroundImage:"url(".concat(fe,")")}}),(0,l.jsx)("input",{type:"text",placeholder:d.JSk,value:D,onChange:function(e){return function(e){var n=e.target.value;N.NV.test(n)&&(H(n),n.length<3&&M([]))}(e)},onClick:function(){z(!0),e.handleAdobeEvent("search initiate",q,!!e.isMobile)},onKeyPress:function(e){return function(e){var n;"Enter"===e.key&&(re(),oe(D,null,null,(null===Y||void 0===Y||null===(n=Y.results)||void 0===n?void 0:n.length)?1:3))}(e)},className:Z.headerSearch_field}),D.length>2?(0,l.jsx)(u.Z,{className:Z.clearbtn,onClick:ue,children:d.EOc}):null,L?(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.Z,{onClick:O,className:Z.closebtn,children:(0,l.jsx)(m.default,{onClick:ue,src:"".concat(v.zkZ.PATH),width:ae.close_search_width,height:ae.close_search_height,alt:v.zkZ.TITLE,title:v.zkZ.TITLE,type:d.G35,configData:I,theme:E})})}):null,q||P?(0,l.jsxs)("div",{className:Z.searchbar,children:[(null===Y||void 0===Y||null===(S=Y.results)||void 0===S?void 0:S.length)>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:Z.Search_result,children:[(0,l.jsx)(o.Z,{className:Z.searchheading,children:d.g$j}),(0,l.jsx)("a",{onClick:function(){return oe(D,null,null,2)},children:(0,l.jsx)(o.Z,{className:Z.searchresult,children:D})})]}),(0,l.jsx)("div",{className:Z.Search_result,children:(null===Y||void 0===Y||null===(k=Y.results)||void 0===k?void 0:k.length)>0&&Y.results.map((function(e,n){var c=e.terms;return(0,l.jsx)("a",{onClick:function(){return he("searchResults",e)},children:(0,l.jsx)(o.Z,{className:Z.typeofsearch,children:c})},n)}))})]}):null,$.length&&""===D?(0,l.jsxs)("div",{className:Z.recentsearch,children:[(0,l.jsx)(o.Z,{className:Z.searchheading,children:d.u8d}),$.slice(0,5).map((function(e,n){return(0,l.jsxs)("div",{className:Z.recentsearch_Container,children:[(0,l.jsx)("span",{className:Z.recentsearch_item,onClick:function(){return he(d.Tm8,e)},children:e}),(0,l.jsx)(u.Z,{className:Z.recentsearch_dismiss,onClick:function(){return function(e){var n=$.filter((function(n,c){return c!==e}));K(n),(0,p.po)(d.Tm8,n,24)}(n)},children:(0,l.jsx)(m.default,{src:"".concat(v.GPl.PATH),alt:v.GPl.TITLE,title:v.GPl.TITLE,height:ae.dismiss_height,width:ae.dismiss_width,type:d.G35,configData:I,theme:E})})]},n)}))]}):null,ne.length>0?(0,l.jsxs)("div",{className:Z.trendsearch,children:[(0,l.jsx)(o.Z,{className:Z.searchheading,children:d.U$n}),ne.length>0&&ne.map((function(e,n){return(0,l.jsx)("a",{className:Z.trendsearch_link,onClick:function(){re(e.name),oe(e.name,null,null,2)},children:(0,l.jsx)("span",{className:Z.trendingsearch,style:0===n?{paddingLeft:0}:{},children:e.name})},n)}))]}):null,""===D?(0,l.jsxs)("div",{className:Z.Occasions,children:[(0,l.jsx)(o.Z,{className:Z.Occasionstitle,children:d.NtZ}),(0,l.jsx)("div",{className:Z.Occasionslist,children:X.map((function(n,c){var t="/occasions/".concat(e.theme,"/").concat(n.name.toLowerCase().replaceAll(/\s/g,"_"),".png");return(0,l.jsxs)("div",{className:Z.Occasionsitems,onClick:function(){return de(n)},children:[(0,l.jsxs)("div",{className:Z.Occasionsitems_content,children:[(0,l.jsx)(m.default,{src:"".concat(t),alt:n.name,title:n.name,width:ae.Occasionsitems_width,height:ae.Occasionsitems_height,configData:I,type:d.G35,theme:E}),(0,l.jsx)("span",{className:Z.Occasionslist_title,children:n.name.toLowerCase()})]}),(0,l.jsx)(u.Z,{className:Z.searchsubmit,onClick:function(){return de(n)},children:(0,l.jsx)(m.default,{src:"".concat(v.wSx.PATH),alt:v.wSx.TITLE,title:"Search",width:ae.searchsubmit_width,height:ae.searchsubmit_height,type:d.G35,configData:I,theme:E})})]},c)}))})]}):null]}):null,ne.length>0&&!q&&!D.length?(0,l.jsx)("div",{className:Z.headerSearch_animateTrending,children:(0,l.jsxs)("div",{className:Z.headerSearch_animateTrending_content,children:[(0,l.jsx)("p",{className:Z.headerSearch_animateTrending_content_text,style:{opacity:0},children:(0,l.jsx)("span",{className:Z.trendingsearch,children:"Temp"})}),null===(T=null===ne||void 0===ne?void 0:ne.slice(0,5))||void 0===T?void 0:T.map((function(e,n){return(0,l.jsx)("p",{className:Z.headerSearch_animateTrending_content_text,onClick:function(){return n=e.name,z(!0),H(n),void oe(n,null,null,2);var n},children:(0,l.jsx)("span",{className:Z.trendingsearch,style:0===n?{paddingLeft:0}:{},children:e.name})},n)}))]})}):null]}):null}},32385:function(e,n,c){var t=c(67294);n.Z=function(e,n){var c=(0,t.useState)(e),a=c[0],s=c[1];return(0,t.useEffect)((function(){var c=setTimeout((function(){s(e)}),n);return function(){clearTimeout(c)}}),[e,n]),a}}}]);